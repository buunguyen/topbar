/*! rainbow.js 0.0.3, 2013-08-21
 *  https://github.com/buunguyen/rainbow.js
 *  Copyright (c) 2013 Buu Nguyen
 *  Licensed under the Apache License, Version 2.0 */
!function(window,document){!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var canvas,progressTimerId,fadeTimerId,currentProgress,showing,addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},options={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)"},repaint=function(){canvas.width=window.innerWidth,canvas.height=5*options.barThickness;var a=canvas.getContext("2d");a.shadowBlur=options.shadowBlur,a.shadowColor=options.shadowColor;var b=a.createLinearGradient(0,0,canvas.width,0);for(var c in options.barColors)b.addColorStop(c,options.barColors[c]);a.lineWidth=options.barThickness,a.beginPath(),a.moveTo(0,options.barThickness/2),a.lineTo(Math.ceil(currentProgress*canvas.width),options.barThickness/2),a.strokeStyle=b,a.stroke()},createCanvas=function(){canvas=document.createElement("canvas");var a=canvas.style;a.position="fixed",a.top=a.left=a.right=a.margin=a.padding=0,a.zIndex=100001,a.display="none",document.body.appendChild(canvas),addEvent(window,"resize",repaint)},rainbow={config:function(a){for(var b in a)options.hasOwnProperty(b)&&(options[b]=a[b])},show:function(){showing||(showing=!0,null!==fadeTimerId&&window.cancelAnimationFrame(fadeTimerId),canvas||createCanvas(),canvas.style.opacity=1,canvas.style.display="block",rainbow.progress(0),options.autoRun&&function a(){progressTimerId=window.requestAnimationFrame(a),rainbow.progress("+"+.05*Math.pow(1-Math.sqrt(currentProgress),2))}())},progress:function(to){return"undefined"==typeof to?currentProgress:("string"==typeof to&&(to=-1!==to.indexOf("+")||-1!==to.indexOf("-")?eval("currentProgress"+to):parseFloat(to)),currentProgress=to>1?1:to,repaint(),currentProgress)},hide:function(){showing&&(showing=!1,null!=progressTimerId&&(window.cancelAnimationFrame(progressTimerId),progressTimerId=null),function a(){return rainbow.progress("+.1")>=1&&(canvas.style.opacity-=.05,canvas.style.opacity<=0)?(canvas.style.display="none",fadeTimerId=null,void 0):(fadeTimerId=window.requestAnimationFrame(a),void 0)}())}};"function"==typeof define&&define.amd?define(function(){return rainbow}):this.rainbow=rainbow}.call(this,window,document);